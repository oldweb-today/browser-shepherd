name: auto-browsers-vnc
auto_remove: false

volumes:
  tmpdir: '/tmp/.X11-unix'

containers:
  - name: xserver
    image: oldwebtoday/vnc-ws-audio
    ports:
      vnc_port: 6080
      cmd_port: 6082

  - name: browser
    image: oldwebtoday/base-browser
    set_user_params: true
    external_network: '${BROWSER_NET}'

    environment:
      DISPLAY: ':99'
      PULSE_SERVER: '/tmp/.X11-unix/pulse-socket'

      PROXY_HOST: '${PROXY_HOST}'
      PROXY_PORT: '${PROXY_PORT}'
      PROXY_GET_CA: 'http://wsgiprox/download/pem'

  - name: autodriver
    image: webrecorder/autobrowser

    deferred: true
    external_network: '${MAIN_NET}'

    environment:
      # defaults for standalone use
      BROWSER_HOST: 'browser'
      REDIS_URL: 'redis://redis:6379/0'
      TAB_TYPE: 'BehaviorTab'
      

