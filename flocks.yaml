flocks:
    - name: browsers-vnc

      containers:
        - name: xserver
          image: oldwebtoday/vnc-ws-audio
          ports:
            vnc_port: 6080
            cmd_port: 6082

        - name: browser
          image: oldwebtoday/base-browser
          set_user_params: true
          external_network: webrecorder_browsers

          environment:
            DISPLAY: 'xserver:99'
            PULSE_SERVER: 'tcp:xserver:4713'

            PROXY_HOST: 'app'
            PROXY_PORT: '8088'
            PROXY_GET_CA: 'http://wsgiprox/download/pem'

    - name: auto-vnc
      # for debugging: to allow seeing of log from containers after they've exited
      auto_remove: false

      containers:
        - name: xserver
          image: oldwebtoday/vnc-ws-audio
          ports:
            vnc_port: 6080
            cmd_port: 6082

        - name: browser
          image: oldwebtoday/base-browser
          set_user_params: true
          external_network: webrecorder_browsers

          environment:
            DISPLAY: 'xserver:99'
            PULSE_SERVER: 'tcp:xserver:4713'

            PROXY_HOST: 'app'
            PROXY_PORT: '8088'
            PROXY_GET_CA: 'http://wsgiprox/download/pem'

        - name: autodriver
          image: autobrowserpy
          external_network: webrecorder_default
          environment:
            BROWSER_HOST: 'browser'


